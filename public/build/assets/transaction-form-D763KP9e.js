import{u as E,j as e,r as A}from"./app-B7hn0IT_.js";import{C as I}from"./confirm-dialog-Gn32p_WO.js";import{B as j}from"./app-logo-icon--o7o-019.js";import{C as w,a as B}from"./card-CUqAMYEJ.js";import{F as V,a as $,b as G,c as L,d as o,e as n,f as l,S as p,h as g,i as v,j as S,k as f,g as c}from"./select-BGHq6_Yl.js";import{I as u}from"./input-DdgX0fs2.js";import{o as k,p as q,G as H,H as N,q as O,I as R}from"./app-layout-UxGoMd_4.js";function W({accounts:y,categories:F,transaction:s,type:m}){const i=s.id!==void 0,{data:d,setData:a,post:_,put:C,processing:h,errors:r,reset:D}=E({account_id:s.account_id?s.account_id.toString():"",category_id:s.category_id?s.category_id.toString():"",amount:s.amount||"",date:s.date?new Date(s.date).toISOString().split("T")[0]:"",description:s.description||""}),b=t=>{t.preventDefault();const x=m==="income"?i?k(s.id).url:q().url:i?H(s.id).url:N().url;i?C(x):_(x,{onSuccess:()=>{D()}})},T=()=>A.delete(m==="income"?O(s.id).url:R(s.id).url);return e.jsx(w,{children:e.jsx(B,{children:e.jsx("form",{onSubmit:b,children:e.jsxs(V,{children:[e.jsx($,{children:i?"Edit Transaction":"Add Transaction"}),e.jsx(G,{children:i?"Edit the details of a transaction":"Add details about a new transaction"}),e.jsxs(L,{children:[e.jsxs(o,{children:[e.jsx(n,{htmlFor:"account_id",children:"Account"}),e.jsxs(l,{children:[e.jsxs(p,{value:d.account_id,onValueChange:t=>a("account_id",t),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select an account"})}),e.jsx(S,{children:y.map(t=>e.jsx(f,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(c,{errors:r.account_id?[{message:r.account_id}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"category_id",children:"Category"}),e.jsxs(l,{children:[e.jsxs(p,{value:d.category_id,onValueChange:t=>a("category_id",t),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select a category"})}),e.jsx(S,{children:F.map(t=>e.jsx(f,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(c,{errors:r.category_id?[{message:r.category_id}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"amount",children:"Amount"}),e.jsxs(l,{children:[e.jsx(u,{id:"amount",type:"number",step:"0.01",min:"0",value:d.amount,onChange:t=>a("amount",t.target.value),placeholder:"Enter amount"}),e.jsx(c,{errors:r.amount?[{message:r.amount}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"date",children:"Date"}),e.jsxs(l,{children:[e.jsx(u,{id:"date",type:"date",value:d.date,onChange:t=>a("date",t.target.value)}),e.jsx(c,{errors:r.date?[{message:r.date}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsxs(l,{children:[e.jsx(u,{id:"description",type:"text",value:d.description,onChange:t=>a("description",t.target.value),placeholder:"Enter description"}),e.jsx(c,{errors:r.description?[{message:r.description}]:void 0})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx(I,{title:"Delete Transaction",description:"Are you sure you want to delete this transaction?",confirmButtonText:"Delete",trigger:e.jsx(j,{variant:"destructive",type:"button",children:"Delete"}),onConfirm:T}),e.jsx(j,{type:"submit",disabled:h,children:h?"Saving...":i?"Save Transaction":"Add Transaction"})]})]})})})})}export{W as T};
